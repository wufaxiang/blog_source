---
title: C的格式化输入输出
date: 2015-01-22 12:16:12
tags: 
  - C
  - IO流
category: C
---

** 1.printf函数 **

	printf()函数是格式化输出函数, 一般用于向标准输出设备按规定格式输出信息。在编写程序时经常会用到此函数。  
	printf()函数的调用格式为:  
	printf(”<格式化字符串>”, <参量表>);  
其中格式化字符串包括两部分内容:  
一部分是正常字符, 这些字符将按原样输出;  
另一部分是格式化规定字符, 以”%”开始, 后跟一个或几个规定字符,用来确定输出内容格式。  
参量表是需要输出的一系列参数, 其个数必须与格式化字符串所说明的输出  
参数个数一样多, 各参数之间用”,”分开, 且顺序一一对应, 否则将会出现意想不到的错误。
<!-- more -->
1\. 格式化规定符  

	Turbo C2.0提供的格式化规定符如下:  
	━━━━━━━━━━━━━━━━━━━━━━━━━━  
	符号 作用  
	——————————————————————————  
	%d 十进制有符号整数  
	%u 十进制无符号整数  
	%f 浮点数  
	%s 字符串  
	%c 单个字符  
	%p 指针的值  
	%e 指数形式的浮点数  
	%x, %X 无符号以十六进制表示的整数  
	%0 无符号以八进制表示的整数  
	%g 自动选择合适的表示法  
	━━━━━━━━━━━━━━━━━━━━━━━━━━

说明：

** (1)可以在”%”和字母之间插进数字表示最大场宽。 **   
例如: 

	%3d 表示输出3位整型数, 不够3位右对齐。  
	%9.2f 表示输出场宽为9的浮点数, 其中小数位为2, 整数位为6,小数点占一位, 不够9位右对齐。  
	%8s 表示输出8个字符的字符串, 不够8个字符右对齐。  
	如果字符串的长度、或整型数位数超过说明的场宽, 将按其实际长度输出。  
	但对浮点数, 若整数部分位数超过了说明的整数位宽度, 将按实际整数位输出;  
	若小数部分位数超过了说明的小数位宽度, 则按说明的宽度以四舍五入输出。  
	另外, 若想在输出值前加一些0, 就应在场宽项前加个0。  
	例如: %04d 表示在输出一个小于4位的数值时, 将在前面补0使其总宽度为4位。  
	如果用浮点数表示字符或整型量的输出格式, 小数点后的数字代表最大宽度,小数点前的数字代表最小宽度。  
	例如: %6.9s 表示显示一个长度不小于6且不大于9的字符串。若大于9, 则第9个字符以后的内容将被删除。  
	** (2)可以在”%”和字母之间加小写字母l, 表示输出的是长型数。 **   
	例如: %ld 表示输出long整数  
	%lf 表示输出double浮点数  
	** (3)可以控制输出左对齐或右对齐, 即在”%”和字母之间加入一个”-” 号可说明输出为左对齐, 否则为右对齐。 **   
	例如: %-7d 表示输出7位整数左对齐  
	%-10s 表示输出10个字符左对齐

2\. 一些特殊规定字符  

	━━━━━━━━━━━━━━━━━━━━━━━━━━  
	字符  作用  
	——————————————————————————  
	\n 换行  
	\f 清屏并换页  
	\r 回车  
	\t Tab符  
	\xhh 表示一个ASCII码用16进表示,  
	其中hh是1到2个16进制数  
	━━━━━━━━━━━━━━━━━━━━━━━━━━

例1：

    
```C++    
    #include<stdio.h>
    #include<string.h>
    int main()
    {
    	char c, s[20], *p;
    	int a=1234, *i,b=12;
    	float f=3.141592653589;
    	double x=0.12345678987654321;
    	p="How do you do";
    	strcpy(s,"Hello, Comrade");
    	i=&b;
    	c='\x41';
    	printf("a=%d\n", a); /*结果输出十进制整数a=1234*/
    	printf("a=%6d\n", a); /*结果输出6位十进制数a= 1234*/
    	printf("a=%06d\n", a); /*结果输出6位十进制数a=001234*/
    	printf("a=%2d\n", a); /*a超过2位, 按实际值输出a=1234*/
    	printf("*i=%4d\n", *i); /*输出4位十进制整数*i= 12*/
    	printf("*i=%-4d\n", *i); /*输出左对齐4位十进制整数*i=12*/
    	printf("i=%p\n", i); /*输出地址i=06E4*/
    	printf("f=%f\n", f); /*输出浮点数f=3.141593*/
    	printf("f=6.4f\n", f); /*输出6位其中小数点后4位的浮点数f=3.1416*/
    	printf("x=%lf\n", x); /*输出长浮点数x=0.123457*/
    	printf("x=%18.16lf\n", x);/*输出18位其中小数点后16位的长浮点数x=0.1234567898765432*/
    	printf("c=%c\n", c); /*输出字符c=A*/
    	printf("c=%x\n", c); /*输出字符的ASCII码值c=41*/
    	printf("s[]=%s\n", s); /*输出数组字符串s[]=Hello, Comrade*/
    	printf("s[]=%6.9s\n", s);/*输出最多9个字符的字符串s[]=Hello,Co*/
    	printf("s=%p\n", s); /*输出数组字符串首字符地址s=FFBE*/
    	printf("*p=%s\n", p); /* 输出指针字符串p=How do you do*/
    	printf("p=%p\n", p); /*输出指针的值p=0194*/
    	return 0;
    }

```
  
  

** 2.scanf函数  **

scanf()函数是格式化输入函数, 它从标准输入设备(键盘) 读取输入的信息。  
其调用格式为:  
scanf(”<格式化字符串>”, <地址表>);  
格式化字符串包括以下三类不同的字符;  
1\. 格式化说明符: 格式化说明符与printf()函数中的格式说明符基本相同。  
2\. 空白字符: 空白字符会使scanf()函数在读操作中略去输入中的一个或多个空白字符。  
3\. 非空白字符: 一个非空白字符会使scanf()函数在读入时剔除掉与这个非空白字符相同的字符。  
地址表是需要读入的所有变量的地址, 而不是变量本身。这与printf()函数完全不同, 要特别注意。各个变量的地址之间同”,”分开。

例2：

    
```C++    
    int i, j;
    printf("i, j=?\n");
    scanf("%d, %d", &i, &j);

```

上例中的scanf()函数先读一个整型数, 然后把接着输入的逗号剔除掉, 最后读入另一个整型数。如果”,”这一特定字符没有找到,scanf()函数就终止。若参数之间的分隔符为空格, 则参数之间必须输入一个或多个空格。

说明：

(1). 对于字符串数组或字符串指针变量, 由于数组名和指针变量名本身就是地址, 因此使用scanf()函数时, 不需要在它们前面加上”&”操作符。  
例3：  

    
```C++   
    char *p, str[20];
    scanf("%s", p); /*从健盘输入字符串*/
    scanf("%s", str);
    printf("%s\n", p); /*向屏幕输出字符串*/
    printf("%s\n", str);
```

(2). 可以在格式化字符串中的”%”各格式化规定符之间加入一个整数, 表示任何读操作中的最大位数。  

如例3中若规定只能输入10字符给字符串指针p, 则第一条scanf() 函数语句变为  

> scanf(”%10s”, p);

程序运行时一旦输入字符个数大于10, p就不再继续读入, 而后面的一个读入函数即scanf(”%s”, str)就会从第11个字符开始读入。实际使用scanf()函数时存在一个问题, 下面举例进行说明: 当使用多个scanf()函数连续给多个字符变量输入时, 例如:  

    
```C++   
    char c1, c2;
    scanf(”%c”, &c1);
    scanf(”%c”, &c2);
    printf(”c1 is %c, c2 is %c”, c2\1, c2);
```

运行该程序, 输入一个字符A后回车 (要完成输入必须回车), 在执行scanf(”%c”, &c1)时, 给变量c1赋值”A”, 但回车符仍然留在缓冲区内, 执行输入语句scanf(”%c”, &c2)时, 变量c2输出的是一空行, 如果输入AB后回车, 那么输出结果为: c1 is A, c2 is B。要解决以上问题, 可以在输入函数前加入清除函数fflush()修改以上程序变成

    
```C++    
    char c1, c2;
    scanf(”%c”, &c1);
    fflush(stdin);
    scanf(”%c”, &c2);
    printf(”c1 is %c, c2 is %c”, c1, c2);
```
  
** 3.非格式化输入输出函数 **

1\. puts()函数  
puts()函数用来向标准输出设备(屏幕)写字符串并换行, 其调用格式为:  
puts(s);  
其中s为字符串变量(字符串数组名或字符串指针)。  
puts()函数的作用与语printf(”%s\n”, s)相同。  
例4:    
```C++   
    char s[20], *f; /*定义字符串数组和指针变量*/
    strcpy(s, “Hello! Turbo C2.0″); /*字符串数组变量赋值*/
    f=”Thank you”; /*字符串指针变量赋值*/
    puts(s);
    puts(f);
```

说明:  
(1). puts()函数只能输出字符串, 不能输出数值或进行格式变换。  
(2). 可以将字符串直接写入puts()函数中。如:  

> puts(”Hello, Turbo C2.0″);


2\. gets()函数  

gets()函数用来从标准输入设备(键盘)读取字符串直到回车结束, 但回车符不属于这个字符串。  
其调用格式为:  
gets(s);  
其中s为字符串变量(字符串数组名或字符串指针)。  
gets(s)函数与scanf(”%s”, &s)相似, 但不完全相同, 使用scanf(”%s”, &s)  
函数输入字符串时存在一个问题, 就是如果输入了空格会认为输入字符串结束,空格后的字符将作为下一个输入项处理, 但gets()
函数将接收输入的整个字符串直到回车为止。  

例5:  

    
```C++    
    char s[20], *f;
    printf(”What’s your name?\n”);
    gets(s); /*等待输入字符串直到回车结束*/
    puts(s); /*将输入的字符串输出*/
    puts(”How old are you?”);
    gets(f);
    puts(f);
```
  

